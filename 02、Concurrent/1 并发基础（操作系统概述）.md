云搜现在单机并发量是500并发，那<span style=background:#fdc200>如何提升</span>至是5000并发呢？该怎么处理？多路复用是一方面。（吞吐量、延迟、并发量）

<span style=background:#ffee7c>从技术上来说有什么挑战，开发</span>

<span style=background:#ffee7c>过程中遇到过哪些挑战、线上故障？</span>

<span style=background:#ffee7c>链路监控、多线程的全链路监控</span>

[多线程专题](https://github.com/sjxbg/interviewGuide/blob/master/docs/JavaMultiThread.md)

[(一)--线程基本使用](https://blog.hufeifei.cn/2017/06/14/Java/Java多线程复习与巩固（一）--线程基本使用/)
[(二)--线程相关工具类的使用](https://blog.hufeifei.cn/2017/06/14/Java/Java多线程复习与巩固（二）--线程相关工具类的使用/)
[(三)--线程同步](https://blog.hufeifei.cn/2017/06/14/Java/Java多线程复习与巩固（三）--线程同步/)
~~[(四)--synchronized的实现](https://blog.hufeifei.cn/2017/06/15/Java/Java多线程复习与巩固（四）--synchronized的JVM实现/)~~
[(五)--生产者消费者问题（第一部分）](https://blog.hufeifei.cn/2017/06/26/Java/Java多线程复习与巩固（五）--生产者消费者问题（第一部分）/)
[(六）--线程池ThreadPoolExecutor详解](https://blog.hufeifei.cn/2017/08/14/Java/Java多线程复习与巩固（六）--线程池ThreadPoolExecutor详解/)
[(七）--任务调度线程池ScheduledThreadPoolExecutor](https://blog.hufeifei.cn/2018/02/22/Java/Java多线程复习与巩固（七）--任务调度线程池ScheduledThreadPoolExecutor/)
[(九）--volatile关键字与CAS操作](https://blog.hufeifei.cn/2017/06/27/Java/Java多线程复习与巩固（九）--volatile关键字与CAS操作/)
[ForkJoinPool入门篇](https://blog.hufeifei.cn/2018/09/15/Java/ForkJoinPool/)



![image]

`synchronized`

1 -> 01

统计总字数



### 基本特征

1. 并发与并行的[区别](https://www.zhihu.com/question/33515481)在于：

   1. **Concurrent**，并发，有处理多个任务的能力，不一定要同时。
      1. 往往是交替轮流进行。

   2. **Parallel**，并行，有同时处理多个任务的能力。

      1. 需要硬件支持，如多流水线、多核多处理器、分布式计算系统。
2. 共享，互斥共享和同时共享。
3. 虚拟，时分复用技术、空分复用技术。
5. 异步。



### 基本功能

1. 进程管理：进程控制、进程同步、进程通信、死锁处理、处理机调度等。
2. 内存管理：内存分配、地址映射、内存保护与共享、虚拟内存。
3. 文件管理：存储空间管理、目录管理、文件读写管理和保护。
4. 设备管理：缓冲管理、设备分配、设备处理、虚拟设备。



### 内核态与用户态

内核是**OS**的基本组成。它为众多应用程序提供对计算机硬件的安全访问，即决定一个应用程序什么时候对某部分硬件操作多长时间。

用户程序，也就是应用程序，只能在用户模式下执行，IO是系统操作，如果要执行IO，则必须<span style=background:#c2e2ff><u>调用系统函数</u></span>交由内核去执行，也就是由用户态（模式）进入内核态（模式），系统函数执行完成后，内核会将结果返回给用户程序。

Linux 的<u><span style=background:#c2e2ff>系统调用</span></u>主要有以下这些（不重要）：

| **功能** | **函数**                    |
| -------- | --------------------------- |
| 进程控制 | fork(); exit(); wait();     |
| 进程通信 | pipe(); shmget(); mmap();   |
| 文件操作 | open(); read(); write();    |
| 设备操作 | ioctl(); read(); write();   |
| 信息维护 | getpid(); alarm(); sleep(); |
| 安全     | chmod(); umask(); chown();  |



### 宏内核和微内核

1. **宏内核**，Monolithic Kernel

   1. 将**OS**功能作为一个紧密结合的整体放到内核中，这样的内核设计称为宏内核。
   2. 由于各模块共享信息，所以拥有较高的性能。
   3. Linux仍然采用宏内核的设计。

2. **微内核**，Micro Kernel

   1. 由于**OS**日趋复杂，所以将**OS**的部分功能移出内核，这样的内核设计称为微内核。
   2. 移出的功能会划分成多个模块，这些模块运行在用户态下。
   3. 不难看出，微内核的设计需要用户态、核心态的频繁切换，性能会有损失（但是可以通过优化找回一部分损失）。
   4. Windows、MacOS等采用微内核的设计。

关于[宏内核和为内核的争论](https://www.zhihu.com/question/20314255)一直没有停歇。



### 中断分类

1. 外中断，由CPU执行指令以外的时间引起。
2. 异常。
3. 陷入，在用户程序中使用系统调用。