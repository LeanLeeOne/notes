## 流

一个无限增长的数据集，叫做流式数据，简称流。

这类数据有以下特点：

- 无界：数据随时间的推移而不断加入。
- 事件：数据类型多为事件。
- 有序：事件的发生总是有时间先后顺序的。
- 不可变：事件一旦产生，就不能改变，只能通过发布新事件的方式进行弥补。
- 可重复结果：或者说是可重播。

### 流表二元性

表可以看作是流的当前状态、或结果，或者说流在某一时刻的状态便是表。

流始终将记录解释为`insert`，而表始终将记录解释为`upsert`。



## 流式处理

流式处理，也叫做流式计算，指的是从流式数据中持续读取、处理、生成结果。

流处理是近实时，介于在线计算和离线计算之间。

流处理[是一种编程范式，介于](https://my.oschina.net/u/2424727/blog/2989115)“<span style=background:#c9ccff>请求/响应</span>”范式和“<span style=background:#c2e2ff>批量处理</span>”范式之间。

> <span style=background:#c9ccff>请求/响应</span>范式：延迟小。
>
> <span style=background:#c2e2ff>批量处理</span>：延迟高，吞吐高。

### 三大框架[[1]](https://juejin.cn/post/6844903934557945870)

**Storm**：低延迟。

**Spark Streaming**：体系完善、社区活跃。

**Flink**：设计理念贴近流处理，API便捷。



## 流处理架构的演变

**Spark Streaming**的微批方式意味着，不能以任意时间间隔，只能以检查点间隔的倍数上窗口化数据，且不支持计数或会话的窗口

分布式快照在我们在本文开头所要达到的所有需求中得分很高. 它们实现了高吞吐量的Exactly-Once语义保证, 同时还保留了连续算子模型以及低延迟和自然流量控制.

**Flink**应用程序的状态访问都在本地进行，因为这有助于其提高吞吐量和降低延迟。通常情况下 Flink 应用程序都是将状态存储在 JVM 堆上，但如果状态太大，我们也可以选择将其以结构化数据格式存储在高速磁盘中。



## 应用场景

### 单词统计

将文本按空格切分为单词，过滤停用词，然后统计词频。

### 股价统计

统计某支股票5秒钟内的交易次数、平均成交价、最高价、最低价。

### 点击事件分析

将用户基本信息、搜索信息进行管理，进而分析用户行为，决定推送内容。