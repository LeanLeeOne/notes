### Servlet

JavaEE的核心是Servlet，Servlet需要运行在容器中，如Tomcat等Web服务器。

HttpServletRequest/HttpServletResponse其实是一种过度设计，目前只有这一种ServletRequest/ServletResponse。

Servlet的生命周期为：加载、初始化、处理请求、销毁、卸载。

Forward与Redirect的区别：

1. Forward，转发，目标地址仅限应用内部，可以传递request对象。
2. Redirect，重定向，目标地址不限，因为实际跳转动作发生于浏览器，所以只能传递字符串信息。



### Tomcat

作为Servlet容器，Tomcat主要负责：

1. 管理Servlet的生命周期。
2. 将URL映射到指定的Servlet上。
3. 将请求封装并交由相应的Servlet处理。
4. 将Servlet处理好的响应返回给客户端。



### 运行模式

众所周知，Tomcat为通过新建线程（线程池）来处理每个请求，其线程创建模式，也就是**Tomcat Connector**的运行模式有3种：

1. **bio**，使用java.io中的类来处理线程问题，采用阻塞式io，blocked input/output，效率低，tomcat7及其以下版本默认采用该模式。

2. **nio**，使用java.nio中的类来处理线程问题，性能高，tomcat8及其以上版本默认采用该模式。

3. **apr**，apache portable runtime，可移植运行时，通过<span style=background:#c2e2ff>JNI</span>调用**核心动态链接库**来处理文件读取和网络传输，

4. 1. 是使用**操作系统**级别的api来解决io问题，性能最高，但是需要额外引入apr、native库。



### WAR部署方式

**WAR**，**W**eb application **AR**chive，是一种JAR（Java ARchive）文件，包含了Java代码及各类资源文件。

既然是jar，其实也可以用Java命令直接运行的，当然这需要WAR中有启动类，以及包含tomcat-embed等依赖库。

但我们的通常做法是将WAR部署到Tomcat上，部署方式有3种：

1. webapps，最简单、最常用。
2. conf/server.xml，在该文件中配置站点信息。
3. conf/Catalina/localhost/，在该目录中新增xml文件配置站点信息。