**String**实际上是通过**字符数组**来实现的，当然，**Java9**开始使用**字节数组**来实现，以节省内存空间。

1. **Java9**还允许指定字符串拼接的策略。
2. **Java9**还增加<span style=background:#b3b3b3>coder</span>属性来标识编码。

String在编译期间，会在**字符串常量池**中创建一个值为该字面值的字符串对象，对于字面值相同的变量会引用同一个字符串对象。

1. 即<span style=background:#b3b3b3>String a = "txt";</span>、<span style=background:#b3b3b3>String b = "txt"</span>，引用的是同一个字符串对象。

2. 但是<span style=background:#b3b3b3>String c = new String("txt")</span>这种方式略有不同，会先确认**字符串常量池**中是否存在该字面值的字符串对象：

3. 1. 如果存在，则会在堆中新建一个字符串对象，并将常量池中的字符串对象内部的字符数组**引用为**自身的字符数组，即字符串对象不相同，但内部的字符数组相同。
   2. 如果不存在，则先在在常量池中新建字符串对象，然后再在堆中新建字符串对象，并引用常量池中的字符串对象的字符数组。



### 对象与引用

1. Java中的“=”不是赋值的意思，是引用的意思，是将对象的地址传递给变量。
2. 变量存放于栈，而（通过new创建的）对象存放于堆。



### 编码

1. **UTF8**采用<span style=background:#c2e2ff>变长</span>编码，即采用高位字节确定编码长度，具有良好的容错能力，应用于传输。

   1. 中文为3字节。

2. **Unicode**采用<span style=background:#c2e2ff>定长</span>编码，两字节。在Java中，**字符型**以及**字符串型**在内存中都是以Unicode进行编码。
   1. 中文为2字节。
   2. [使用int[\]创建超长的Unicode编码](https://zhuanlan.zhihu.com/p/110307661)



### 字符串拼接

1. Java对加号进行了重载，允许进行字符串拼接。

   1. 对于字符串常量的相加（或者说拼接），Java会使用StringConcatFactory进行优化。
   2. 字符串对象是不可变的，所以对于频繁的字符串相加，会带来频繁的字符串对象创建，而**StringBuilder**可以改善该问题。
   3. 对于"a"+"b"这种字面量的拼接，编译器编译时会直接将其编译为"ab"，以减少对象的创建。

3. **StringBuilder**是一个采用链式操作的可变对象，预分配缓冲区，不会创建临时对象。

4. **StringBuffer**可以看作是StringBuilder的早期版本，它通过同步来保证**线程安全**，执行效率相对较低。

5. **String.join()**内部采用了**StringJoiner**来实现字符串的带分隔符拼接。

Java String使用substring()切割字符串，更多实用方法参照此[文章](https://www.cnblogs.com/abook/p/5527341.html)。