## 物理层

略。



## 链路层

### Media Access Control Address

MAC地址是<u>链路层</u>地址，长度为`6Byte`，用于唯一标识网络适配器（网卡）。

> 一台主机拥有多少个网卡就有多少个MAC地址。

### 交换机

交换机是一种即插即用设备，具有自学习能力，学习的是交换表的内容，而交换表中存储着MAC地址到接口的映射。



## 网络层

### Internet Protocol，IP

<u>网络层</u>使用IP将异构的物理网络连接起来，使得<u>网络层</u>看起来像是一个统一的网络。

与IP配套的还有三个协议：

- Address Resolution Protocol，ARP，地址解析协议。
- Internet Control Message Protocol，ICMP，网际控制报文协议。
- Internet Group Management Protocol，IGMP，网际组管理协议。

#### 数据报格式

![](../images/4/ip_datagram_format.jpg)

#### 编址方式

##### 分类

分类编址方式，由网络号和主机号两部分组成，其中不同分类具有不同的网络号长度，并且是固定的。

IP地址：{<网络号>,<主机号>}

![](../images/4/ip_network_host.png)

##### 子网划分

子网划分编址方式，是通过在主机号中拿一部分作为子网号，把两级IP地址划分为三级IP地址。

IP地址：{<网络号>,<子网号>,<主机号>}

##### 无分类

无分类编址方式，与前两种变址方式不同，它使用网络前缀和主机号来对IP地址进行编码，网络前缀的长度可以根据需要变化。

IP地址：{<地址>/<前缀长度>}

#### ARP

ARP负责管理局域网上的各主机和路由器的IP地址到MAC地址的映射。

#### ICMP

ICMP是为了更有效地转发IP数据报、提高IP数据报的交付成功率。

ICMP封装在IP数据报中，但不属于高层协议。

> `ping`是ICMP的一个重要应用，主要用来测试两台主机之间的连通性。

### Virtual Private Network，VPN，虚拟专用网

由于IP地址紧缺，一个机构能申请到的IP地址数往往远小于本机构所拥有的主机数，同时，一个机构也不需要把所有的主机接入到公网中，也就是说，一个机构内的主机可以使用仅在本机构有效的IP地址，于是便有了VPN。

VPN使用公网作为本机构各专网之间的通信载体。

- Private：专用，指机构内的主机只与机构内的其它主机通信。
- Virtual：虚拟，指好像是但实际上不是，因为VPN有经过公用的互联网。

VPN有三个专用地址块：

- `10.0.0.0` ~ `10.255.255.255`
- `172.16.0.0` ~ `172.31.255.255`
- `192.168.0.0` ~ `192.168.255.255`

### Network Address Translation，NAT，网络地址转换

专用网内部的主机使用的是本地IP地址，如果想和互联网上的主机通信时，可以使用NAT来将本地IP转换为公网IP。

