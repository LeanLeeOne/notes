### Sleuth

**Sleuth**提供服务间调用的链路追踪，以方便我们对服务进行好事分析、错误可视化、链路优化。

**Sleuth**可与**Zipkin**搭配使用，将收集来的信息发送给**Zipkin**。



### Zipkin

**Zipkin**是一个分布式链路追踪系统，用于收集应用程序中需要排除延迟故障的时序信息。追踪请求在整个分布式系统中的调用链路，以此来推断系统的行为表现和各环节性能损耗。

**Zipkin**的工作流程分为3部分：

1. 生产记录

   1. **Zipkin**可用于多线程、RPC、HTTP等调用过程。
   2. 当应用系统接收到请求时，**Zipkin**会为请求赋予一个全局唯一的Trace ID

2. 收集记录

   1. 可以通过**HTTP**将记录异步发送给**Zipkin**，之后持久化到**MySQL**、**Elasticsearch**等数据库中。
   2. 也可以通过写本地日志，使用日志收集工具进行收集，最后持久化到**MySQL**中。

3. 记录查询展示

   1. 通过追踪Trace ID即可呈现整个调用链。

**Zipkin**的Trace ID采用ThreadLocalRandom类来生成的。